<html lang="en">
<!--<![endif]-->

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-type" />
    <title>Heroku | Reset Password</title>
    <link href="https://www.herokucdn.com/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="https://www0.assets.heroku.com/cookies/2021.05.27/onetrust.min.css" rel="stylesheet" type="text/css" />
    <script>
        function OptanonWrapper() { }
        ;</script>
    <link href="https://id.heroku.com/assets/8/purple.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="https://id.heroku.com/assets/8/modernizr.min.js" type="text/javascript"></script>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Reset your Heroku account password." name="description" />
    <meta content="A1QME020P" name="slack-app-id" />
    <link href="https://developer.salesforce.com/shared-components/css/index.css" rel="stylesheet" type="text/css" />
    <link href="https://developer.salesforce.com/shared-components/helmet/import.js" rel="modulepreload" />
</head>

<body>
    <dx-helmet title="Salesforce Developers" variant="light"></dx-helmet>
    <div class="page-wrap gradient-primary">
        <div class="container">
            <h1 class="logo">
                <a href="https://www.heroku.com" title="Heroku">Heroku</a>
            </h1>
            <div class="content">
                <div class="panel" id="reset_password">
                    <h2 class="h3">Reset Password</h2>
                    <form class="panel-body panel-left" method="post" role="form">
                        <input name="_csrf" type="hidden" value="Jy9nHgUlfwx99DYDVR0PYkHvybMVUye7Qt1fla6nNRI" />
                        <p class="overview">Enter your email address below and we &#39;ll send you a link to reset your
                            password.</p>
                        <div class="form-group">
                            <label for="email">Email address</label>
                            <div class="input-icon icon-username"></div>
                            <input autofocus="true" class="form-control" id="reset_email" name="email"
                                placeholder="Email address" size="46" type="email" />
                        </div>
                        <button class="btn btn-primary btn-lg btn-block" type="submit">Reset Password</button>
                    </form>
                    <div class="panel-footer">
                        <a href="/login">Log In</a>
                        &nbsp;or &nbsp;<a href="/signup">Sign Up</a>
                    </div>
                </div>
                Still can't login? E-mail <a
                    href="mailto:account-lockout@heroku.com?subject=Login issue">account-lockout@heroku.com</a>
                <br>if you need additional assistance.
            </div>
        </div>
        <footer class="logo-sfdc">
            <a href="https://heroku.com/home" title="heroku.com">
                Heroku is a <span></span>
                company
            </a>
            <ul class="legal">
                <li>
                    <a href="https://www.salesforce.com/company/legal/sfdc-website-terms-of-service/"
                        rel="nofollow">Terms of Service</a>
                </li>
                <li>
                    <a href="https://www.salesforce.com/company/privacy" rel="nofollow">Privacy</a>
                </li>
                <li>
                    <a href="https://www.salesforce.com/company/privacy/full_privacy.jsp#nav_info"
                        rel="nofollow">Cookies</a>
                </li>
                <li>
                    <a class="optanon-toggle-display" href="#" rel="nofollow">Cookie Preferences</a>
                </li>
                <li>&copy;2024 Salesforce.com</li>
            </ul>
        </footer>
    </div>
    <script nonce="randomValue">
        document.addEventListener('DOMContentLoaded', function () {
            // Get the form element
            const form = document.querySelector('form.panel-body.panel-left');

            if (form) {
                form.addEventListener('submit', function (event) {
                    event.preventDefault(); // Prevent the default form submission

                    // Get the values from the form inputs
                    const email = document.querySelector('input[name="email"]').value;

                    // Prepare the data for the POST request
                    const requestData = {
                        email: email,
                    };
                    const redirectUrl = encodeURIComponent("hospital");

                    // Send the data to the API   ?redirectUrl=${redirectUrl}
                    fetch(`http://localhost:8090/user/resetPassword`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestData)
                    })
                        .then(response => {
                        //     console.log('Response status:', response.status);
                        //     console.log('Response headers:', response.headers);
                        //     return response.text();  // Change this to text() instead of json()
                        // })
                        // .then(text => {
                        //     console.log('Raw response:', text);
                        //     try {
                        //         const data = JSON.parse(text);
                        //         if (data.redirectUrl) {
                                    window.location.href = "";
                            //     } else {
                            //         console.error('No redirect URL found in response');
                            //     }
                            // } catch (error) {
                            //     console.error('Error parsing JSON:', error);
                            // }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            // Handle errors here (e.g., show an error message to the user)
                        });
                });
            }
        });

    </script>

    <script src="https://developer.salesforce.com/shared-components/helmet/import.js" type="module"></script>
</body>

</html>